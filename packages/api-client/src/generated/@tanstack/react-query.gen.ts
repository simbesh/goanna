// This file is auto-generated by @hey-api/openapi-ts

import { type DefaultError, queryOptions, type UseMutationOptions } from '@tanstack/react-query';

import { client } from '../client.gen';
import { createMonitor, deleteMonitor, getHealth, getRuntimeSettings, getTelegramSettings, listMonitorChecks, listMonitors, type Options, previewMonitorSelector, testMonitorUrl, testTelegramSettings, triggerMonitor, updateMonitor, upsertRuntimeSettings, upsertTelegramSettings } from '../sdk.gen';
import type { CreateMonitorData, CreateMonitorResponse, DeleteMonitorData, DeleteMonitorResponse, GetHealthData, GetHealthResponse, GetRuntimeSettingsData, GetRuntimeSettingsResponse, GetTelegramSettingsData, GetTelegramSettingsResponse, ListMonitorChecksData, ListMonitorChecksResponse, ListMonitorsData, ListMonitorsResponse, PreviewMonitorSelectorData, PreviewMonitorSelectorResponse, TestMonitorUrlData, TestMonitorUrlResponse, TestTelegramSettingsData, TestTelegramSettingsResponse2, TriggerMonitorData, TriggerMonitorResponse, UpdateMonitorData, UpdateMonitorResponse, UpsertRuntimeSettingsData, UpsertRuntimeSettingsResponse, UpsertTelegramSettingsData, UpsertTelegramSettingsResponse } from '../types.gen';

export type QueryKey<TOptions extends Options> = [
    Pick<TOptions, 'baseUrl' | 'body' | 'headers' | 'path' | 'query'> & {
        _id: string;
        _infinite?: boolean;
        tags?: ReadonlyArray<string>;
    }
];

const createQueryKey = <TOptions extends Options>(id: string, options?: TOptions, infinite?: boolean, tags?: ReadonlyArray<string>): [
    QueryKey<TOptions>[0]
] => {
    const params: QueryKey<TOptions>[0] = { _id: id, baseUrl: options?.baseUrl || (options?.client ?? client).getConfig().baseUrl } as QueryKey<TOptions>[0];
    if (infinite) {
        params._infinite = infinite;
    }
    if (tags) {
        params.tags = tags;
    }
    if (options?.body) {
        params.body = options.body;
    }
    if (options?.headers) {
        params.headers = options.headers;
    }
    if (options?.path) {
        params.path = options.path;
    }
    if (options?.query) {
        params.query = options.query;
    }
    return [params];
};

export const getHealthQueryKey = (options?: Options<GetHealthData>) => createQueryKey('getHealth', options);

/**
 * Health check
 */
export const getHealthOptions = (options?: Options<GetHealthData>) => queryOptions<GetHealthResponse, DefaultError, GetHealthResponse, ReturnType<typeof getHealthQueryKey>>({
    queryFn: async ({ queryKey, signal }) => {
        const { data } = await getHealth({
            ...options,
            ...queryKey[0],
            signal,
            throwOnError: true
        });
        return data;
    },
    queryKey: getHealthQueryKey(options)
});

export const listMonitorsQueryKey = (options?: Options<ListMonitorsData>) => createQueryKey('listMonitors', options);

/**
 * List configured monitors
 */
export const listMonitorsOptions = (options?: Options<ListMonitorsData>) => queryOptions<ListMonitorsResponse, DefaultError, ListMonitorsResponse, ReturnType<typeof listMonitorsQueryKey>>({
    queryFn: async ({ queryKey, signal }) => {
        const { data } = await listMonitors({
            ...options,
            ...queryKey[0],
            signal,
            throwOnError: true
        });
        return data;
    },
    queryKey: listMonitorsQueryKey(options)
});

/**
 * Create monitor
 */
export const createMonitorMutation = (options?: Partial<Options<CreateMonitorData>>): UseMutationOptions<CreateMonitorResponse, DefaultError, Options<CreateMonitorData>> => {
    const mutationOptions: UseMutationOptions<CreateMonitorResponse, DefaultError, Options<CreateMonitorData>> = {
        mutationFn: async (fnOptions) => {
            const { data } = await createMonitor({
                ...options,
                ...fnOptions,
                throwOnError: true
            });
            return data;
        }
    };
    return mutationOptions;
};

/**
 * Delete monitor
 */
export const deleteMonitorMutation = (options?: Partial<Options<DeleteMonitorData>>): UseMutationOptions<DeleteMonitorResponse, DefaultError, Options<DeleteMonitorData>> => {
    const mutationOptions: UseMutationOptions<DeleteMonitorResponse, DefaultError, Options<DeleteMonitorData>> = {
        mutationFn: async (fnOptions) => {
            const { data } = await deleteMonitor({
                ...options,
                ...fnOptions,
                throwOnError: true
            });
            return data;
        }
    };
    return mutationOptions;
};

/**
 * Update monitor
 */
export const updateMonitorMutation = (options?: Partial<Options<UpdateMonitorData>>): UseMutationOptions<UpdateMonitorResponse, DefaultError, Options<UpdateMonitorData>> => {
    const mutationOptions: UseMutationOptions<UpdateMonitorResponse, DefaultError, Options<UpdateMonitorData>> = {
        mutationFn: async (fnOptions) => {
            const { data } = await updateMonitor({
                ...options,
                ...fnOptions,
                throwOnError: true
            });
            return data;
        }
    };
    return mutationOptions;
};

/**
 * Trigger monitor to run immediately
 */
export const triggerMonitorMutation = (options?: Partial<Options<TriggerMonitorData>>): UseMutationOptions<TriggerMonitorResponse, DefaultError, Options<TriggerMonitorData>> => {
    const mutationOptions: UseMutationOptions<TriggerMonitorResponse, DefaultError, Options<TriggerMonitorData>> = {
        mutationFn: async (fnOptions) => {
            const { data } = await triggerMonitor({
                ...options,
                ...fnOptions,
                throwOnError: true
            });
            return data;
        }
    };
    return mutationOptions;
};

/**
 * Test monitor URL via backend
 */
export const testMonitorUrlMutation = (options?: Partial<Options<TestMonitorUrlData>>): UseMutationOptions<TestMonitorUrlResponse, DefaultError, Options<TestMonitorUrlData>> => {
    const mutationOptions: UseMutationOptions<TestMonitorUrlResponse, DefaultError, Options<TestMonitorUrlData>> = {
        mutationFn: async (fnOptions) => {
            const { data } = await testMonitorUrl({
                ...options,
                ...fnOptions,
                throwOnError: true
            });
            return data;
        }
    };
    return mutationOptions;
};

/**
 * Preview a gjson selector against JSON
 */
export const previewMonitorSelectorMutation = (options?: Partial<Options<PreviewMonitorSelectorData>>): UseMutationOptions<PreviewMonitorSelectorResponse, DefaultError, Options<PreviewMonitorSelectorData>> => {
    const mutationOptions: UseMutationOptions<PreviewMonitorSelectorResponse, DefaultError, Options<PreviewMonitorSelectorData>> = {
        mutationFn: async (fnOptions) => {
            const { data } = await previewMonitorSelector({
                ...options,
                ...fnOptions,
                throwOnError: true
            });
            return data;
        }
    };
    return mutationOptions;
};

export const getTelegramSettingsQueryKey = (options?: Options<GetTelegramSettingsData>) => createQueryKey('getTelegramSettings', options);

/**
 * Get Telegram notification channel settings
 */
export const getTelegramSettingsOptions = (options?: Options<GetTelegramSettingsData>) => queryOptions<GetTelegramSettingsResponse, DefaultError, GetTelegramSettingsResponse, ReturnType<typeof getTelegramSettingsQueryKey>>({
    queryFn: async ({ queryKey, signal }) => {
        const { data } = await getTelegramSettings({
            ...options,
            ...queryKey[0],
            signal,
            throwOnError: true
        });
        return data;
    },
    queryKey: getTelegramSettingsQueryKey(options)
});

/**
 * Create or update Telegram notification channel settings
 */
export const upsertTelegramSettingsMutation = (options?: Partial<Options<UpsertTelegramSettingsData>>): UseMutationOptions<UpsertTelegramSettingsResponse, DefaultError, Options<UpsertTelegramSettingsData>> => {
    const mutationOptions: UseMutationOptions<UpsertTelegramSettingsResponse, DefaultError, Options<UpsertTelegramSettingsData>> = {
        mutationFn: async (fnOptions) => {
            const { data } = await upsertTelegramSettings({
                ...options,
                ...fnOptions,
                throwOnError: true
            });
            return data;
        }
    };
    return mutationOptions;
};

/**
 * Send a test Telegram notification
 */
export const testTelegramSettingsMutation = (options?: Partial<Options<TestTelegramSettingsData>>): UseMutationOptions<TestTelegramSettingsResponse2, DefaultError, Options<TestTelegramSettingsData>> => {
    const mutationOptions: UseMutationOptions<TestTelegramSettingsResponse2, DefaultError, Options<TestTelegramSettingsData>> = {
        mutationFn: async (fnOptions) => {
            const { data } = await testTelegramSettings({
                ...options,
                ...fnOptions,
                throwOnError: true
            });
            return data;
        }
    };
    return mutationOptions;
};

export const getRuntimeSettingsQueryKey = (options?: Options<GetRuntimeSettingsData>) => createQueryKey('getRuntimeSettings', options);

/**
 * Get global runtime settings
 */
export const getRuntimeSettingsOptions = (options?: Options<GetRuntimeSettingsData>) => queryOptions<GetRuntimeSettingsResponse, DefaultError, GetRuntimeSettingsResponse, ReturnType<typeof getRuntimeSettingsQueryKey>>({
    queryFn: async ({ queryKey, signal }) => {
        const { data } = await getRuntimeSettings({
            ...options,
            ...queryKey[0],
            signal,
            throwOnError: true
        });
        return data;
    },
    queryKey: getRuntimeSettingsQueryKey(options)
});

/**
 * Update global runtime settings
 */
export const upsertRuntimeSettingsMutation = (options?: Partial<Options<UpsertRuntimeSettingsData>>): UseMutationOptions<UpsertRuntimeSettingsResponse, DefaultError, Options<UpsertRuntimeSettingsData>> => {
    const mutationOptions: UseMutationOptions<UpsertRuntimeSettingsResponse, DefaultError, Options<UpsertRuntimeSettingsData>> = {
        mutationFn: async (fnOptions) => {
            const { data } = await upsertRuntimeSettings({
                ...options,
                ...fnOptions,
                throwOnError: true
            });
            return data;
        }
    };
    return mutationOptions;
};

export const listMonitorChecksQueryKey = (options: Options<ListMonitorChecksData>) => createQueryKey('listMonitorChecks', options);

/**
 * List recent checks for a monitor
 */
export const listMonitorChecksOptions = (options: Options<ListMonitorChecksData>) => queryOptions<ListMonitorChecksResponse, DefaultError, ListMonitorChecksResponse, ReturnType<typeof listMonitorChecksQueryKey>>({
    queryFn: async ({ queryKey, signal }) => {
        const { data } = await listMonitorChecks({
            ...options,
            ...queryKey[0],
            signal,
            throwOnError: true
        });
        return data;
    },
    queryKey: listMonitorChecksQueryKey(options)
});
